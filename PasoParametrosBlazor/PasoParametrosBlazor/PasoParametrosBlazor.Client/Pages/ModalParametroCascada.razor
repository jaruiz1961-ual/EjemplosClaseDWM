@page "/modalParametroCascada"
@using PasoParametrosBlazor.Client.Components
@rendermode InteractiveWebAssembly

<button @onclick="MostrarModal">Mostrar modal con parametro</button>
<input @bind="dato" />

@if (modalVisible)
{
    <CascadingValue Value="dato" Name="ValorEntrada">
        <CascadingValue Value="(Action)CerrarModal" Name="CallBack" >
            <CascadingValue Value="inx" Name="Indice">
            @if (inx == 1)
            {
                    <MiModalParametroCascada ValorEditadoChanged="@ActualizarDato" Ultimo=false />
            }

            @if (inx == 2)
            {
                    <MiModalParametroCascada ValorEditadoChanged="@ActualizarDato" Ultimo=false />
            }

            @if (inx == 3)
            {
                    <MiModalParametroCascada ValorEditadoChanged="@ActualizarDato" Ultimo=true />
            }

            </CascadingValue>
        </CascadingValue>
    </CascadingValue>
}

@code {
    string dato = "Inicial";
    bool modalVisible = false;
    int inx = 0;

    async Task ActualizarDato(string nuevoValor)
    {
        dato = nuevoValor;
    }

    void MostrarModal() 
    {
        inx = 1;
        modalVisible = true;
    }
    void CerrarModal()
    {
        inx++;
        if (inx == 4) modalVisible = false;
    }
}

